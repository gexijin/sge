---
draft: yes
title: Forecasting mass shootings
author: Steven Xijin Ge
date: '2018-07-02'
slug: forecasting-mass-shootings
categories:
  - R
  - Social issues
tags:
  - Gun violence
header:
  caption: ''
  image: ''
---



<p>Using the mass shooting data from <a href="https://www.motherjones.com/politics/2012/12/mass-shootings-mother-jones-full-data/">Mother Jones website,</a> I tried to forecast the number of mass shoottings and total fatalities in the rest of 2018. Some of the R scripts are from this <a href="http://a-little-book-of-r-for-time-series.readthedocs.io/en/latest/src/timeseries.html">website.</a> Please let me know if I there is any error. I am not an expert on time series analysis. <a href="www.twitter.com">Twitter</a> <span class="citation">@StevenXGe</span></p>
<p>In recent years, mass shootings are becomming more frequent and more deadly. The models suggest for the rest of 2018, there probably be about 6 more shootings, killing about 59 people in the U.S.</p>
<div id="data" class="section level1">
<h1>Data</h1>
<pre class="r"><code>url = &quot;https://docs.google.com/spreadsheet/pub?key=0AswaDV9q95oZdG5fVGJTS25GQXhSTDFpZXE0RHhUdkE&amp;output=csv&quot;
x = read.csv(url)
colnames(x)</code></pre>
<pre><code>##  [1] &quot;case&quot;                               
##  [2] &quot;location&quot;                           
##  [3] &quot;date&quot;                               
##  [4] &quot;year&quot;                               
##  [5] &quot;summary&quot;                            
##  [6] &quot;Fatalities&quot;                         
##  [7] &quot;Injured&quot;                            
##  [8] &quot;total_victims&quot;                      
##  [9] &quot;Venue&quot;                              
## [10] &quot;Prior.signs.of.mental.health.issues&quot;
## [11] &quot;Mental.health...details&quot;            
## [12] &quot;Weapons.obtained.legally&quot;           
## [13] &quot;Where.obtained&quot;                     
## [14] &quot;Type.of.weapons&quot;                    
## [15] &quot;Weapon.details&quot;                     
## [16] &quot;Race&quot;                               
## [17] &quot;Gender&quot;                             
## [18] &quot;Sources&quot;                            
## [19] &quot;Mental.Health.Sources&quot;              
## [20] &quot;latitude&quot;                           
## [21] &quot;longitude&quot;                          
## [22] &quot;Type&quot;</code></pre>
</div>
<div id="data-cleaning" class="section level1">
<h1>Data cleaning</h1>
<pre class="r"><code>x = x[,c(&quot;date&quot;,&quot;year&quot;,&quot;Fatalities&quot;,&quot;Race&quot;,&quot;Gender&quot;,&quot;Type&quot;)]
x$Race = gsub(&quot;white&quot;,&quot;White&quot;,as.character(x$Race) )
x$Race = as.factor(x$Race)
summary(x)</code></pre>
<pre><code>##         date         year        Fatalities          Race   
##           : 2   Min.   :1982   Min.   : 3.000   White  :56  
##  1/17/1989: 1   1st Qu.:1998   1st Qu.: 5.000   black  : 9  
##  1/28/18  : 1   Median :2009   Median : 6.000   Asian  : 8  
##  1/30/2006: 1   Mean   :2006   Mean   : 8.313   Black  : 7  
##  1/6/2017 : 1   3rd Qu.:2015   3rd Qu.: 8.000   Latino : 7  
##  1/8/2011 : 1   Max.   :2018   Max.   :58.000   Other  : 5  
##  (Other)  :94   NA&#39;s   :2      NA&#39;s   :2        (Other): 9  
##            Gender      Type   
##               : 2        : 2  
##  Female       : 2   Mass :85  
##  M            :26   Spree:14  
##  Male         :70             
##  Male &amp; Female: 1             
##                               
## </code></pre>
<pre class="r"><code>x = subset(x,x$year != 2018)
x$date = as.Date(x$date,&quot;%m/%d/%Y&quot;)</code></pre>
</div>
<div id="the-number-of-mass-shootings-per-year" class="section level1">
<h1>The number of mass shootings per year</h1>
<p>There is no mass shooting in 1983, 1985, and 2002.</p>
<pre class="r"><code>yearly = table(x$year)
yearly = c(1,0, yearly)
names(yearly)[1:4]= 1982:1985
yearly[3]=2
yearly[4]=0 
yearly = c(yearly[1:20],0, yearly[21:35])
names(yearly)[21] = &quot;2002&quot;
barplot(yearly)</code></pre>
<p><img src="/post/2018-07-02-Forecasting-mass-shootings-2018_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>Clearly, the frequency of mass shootings is increasing in the last 6 years.</p>
<div id="time-series-model" class="section level2">
<h2>Time series model</h2>
<pre class="r"><code>series = ts(yearly,start=c(1982)) 
yforecast = HoltWinters(series, beta=FALSE, gamma=FALSE)
yforecast</code></pre>
<pre><code>## Holt-Winters exponential smoothing without trend and without seasonal component.
## 
## Call:
## HoltWinters(x = series, beta = FALSE, gamma = FALSE)
## 
## Smoothing parameters:
##  alpha: 0.5024872
##  beta : FALSE
##  gamma: FALSE
## 
## Coefficients:
##       [,1]
## a 8.446514</code></pre>
<pre class="r"><code>plot(yforecast, main=&quot;Number of mass shootings &quot;)</code></pre>
<p><img src="/post/2018-07-02-Forecasting-mass-shootings-2018_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The red line is probably the model.</p>
</div>
<div id="making-forecast" class="section level2">
<h2>Making forecast</h2>
<pre class="r"><code># install.packages(&quot;forecast&quot;)
library(forecast)
shottings = forecast(yforecast, h = 1)
shottings</code></pre>
<pre><code>##      Point Forecast    Lo 80   Hi 80    Lo 95    Hi 95
## 2018       8.446514 6.239526 10.6535 5.071217 11.82181</code></pre>
<p>The model predicts there would be about 8.4 mass shootings this year. Since 2 already happened. There probably would be 6 incidences of mass shooting for the rest of 2018. The 95% confidence interval is between 5 and 11. So it is very likely at least 3 more shootings will occur in 2018.</p>
</div>
</div>
<div id="total-fatalities-in-2018" class="section level1">
<h1>Total fatalities in 2018</h1>
<div id="prepare-data" class="section level2">
<h2>Prepare data</h2>
<pre class="r"><code>tem = aggregate(x$Fatalities, by=list(x$year), FUN=sum)
tem2 = rbind( tem[1,], c(1983,0), tem[2,],c(1985,0),tem[3:18,], c(2002, 0), tem[19:33, ] ) 
fatalities = tem2[,2]
names(fatalities) = tem2[,1]
barplot(fatalities, las=2)</code></pre>
<p><img src="/post/2018-07-02-Forecasting-mass-shootings-2018_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>This data is noisy, but we still see an uptake in total fatalities in the last 10 years.</p>
<pre class="r"><code>series = ts(fatalities,start=c(1982))
yforecast = HoltWinters(series, beta=FALSE, gamma=FALSE)
yforecast</code></pre>
<pre><code>## Holt-Winters exponential smoothing without trend and without seasonal component.
## 
## Call:
## HoltWinters(x = series, beta = FALSE, gamma = FALSE)
## 
## Smoothing parameters:
##  alpha: 0.4323295
##  beta : FALSE
##  gamma: FALSE
## 
## Coefficients:
##       [,1]
## a 79.90564</code></pre>
<pre class="r"><code>plot(yforecast, main=&quot;Total fatalities from mass shooting&quot;)</code></pre>
<p><img src="/post/2018-07-02-Forecasting-mass-shootings-2018_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code>shottings = forecast(yforecast, h = 1)
shottings</code></pre>
<pre><code>##      Point Forecast    Lo 80    Hi 80    Lo 95    Hi 95
## 2018       79.90564 53.81795 105.9933 40.00795 119.8033</code></pre>
<p>So this model predicts that about 80 people will be killed in mass shootings in 2018. Since there were 21 in Florida and Pennsylvania already. The rest of 2018 will see about 59 people getting killed. I hope these are not going to happen in schools.</p>
</div>
</div>
